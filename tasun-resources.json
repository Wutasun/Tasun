async function applyCloudConfigFromResources(pageKey){
  try{
    const appVer = String(window.TASUN_APP_VER||"").trim();
    const url = "tasun-resources.json?v=" + encodeURIComponent(appVer) + "&_=" + Date.now();
    const j = await fetch(url, { cache:"no-store" }).then(r => r.json());

    const cfg = j && j[pageKey];
    if(cfg && cfg.apiBase){
      setApiBase(cfg.apiBase); // 你原本的 setApiBase()
    }
    if(cfg && cfg.endpoints){
      // 你原本若用 D1_PING_PATH / D1_PULL_PATH / D1_MERGE_PATH 這些變數，就在這裡覆寫
      D1_PING_PATH  = cfg.endpoints.health || D1_PING_PATH;
      D1_PULL_PATH  = cfg.endpoints.read   || D1_PULL_PATH;
      D1_MERGE_PATH = cfg.endpoints.merge  || D1_MERGE_PATH;
    }
  }catch(e){
    // 讀不到就維持預設值（例如檔案用 file:// 開啟時 fetch 可能被擋）
  }
}
