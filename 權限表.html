<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Tasun æ¬Šé™è¡¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold: #f6d37a;
      --gold-soft: rgba(246, 211, 122, 0.8);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: "Noto Serif TC","æ¨™æ¥·é«”","Microsoft JhengHei",serif;
      background: radial-gradient(circle at 50% 10%, #2b1a05, #050302 60%);
      color: var(--gold);
      padding: 20px;
    }

    /* è¿”å›é¦–é  */
    .back-home {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.3rem 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(246, 211, 122, 0.7);
      background: rgba(0,0,0,0.85);
      color: var(--gold-soft);
      text-decoration: none;
      font-size: 0.8rem;
      box-shadow: 0 8px 16px rgba(0,0,0,0.8);
    }

    .back-home:hover {
      background: rgba(0,0,0,0.95);
    }

    .page-title {
      text-align: center;
      margin: 10px 0 20px;
      font-size: 1.7rem;
      letter-spacing: 0.35em;
      text-indent: 0.35em;
      text-shadow:
        0 0 12px rgba(246, 211, 122, 0.9),
        0 0 26px rgba(246, 211, 122, 0.6);
    }

    .panel {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.5rem 1.8rem;
      border-radius: 1.4rem;
      background: rgba(0,0,0,0.9);
      border: 1px solid rgba(246, 211, 122, 0.45);
      box-shadow:
        0 18px 32px rgba(0,0,0,0.9),
        0 0 30px rgba(246, 211, 122, 0.35);
    }

    .panel p {
      font-size: 0.85rem;
      color: var(--gold-soft);
      margin-bottom: 0.8rem;
      line-height: 1.5;
    }

    h2 {
      font-size: 1.0rem;
      margin: 1rem 0 0.4rem;
      letter-spacing: 0.18em;
      text-indent: 0.18em;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
      font-size: 0.84rem;
    }

    thead {
      background: rgba(246, 211, 122, 0.18);
    }

    th, td {
      border-bottom: 1px solid rgba(246, 211, 122, 0.2);
      padding: 0.35rem 0.4rem;
      text-align: center;
      vertical-align: middle;
    }

    th {
      letter-spacing: 0.14em;
      text-indent: 0.14em;
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    input[type="text"],
    input[type="password"],
    select {
      width: 100%;
      padding: 0.25rem 0.35rem;
      border-radius: 0.4rem;
      border: 1px solid rgba(246, 211, 122, 0.5);
      background: rgba(0,0,0,0.9);
      color: var(--gold);
      font-size: 0.8rem;
    }

    input::placeholder {
      color: rgba(246, 211, 122, 0.4);
    }

    input[type="checkbox"] {
      transform: scale(1.2);
    }

    .btn-small {
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(246, 211, 122, 0.7);
      background: rgba(0,0,0,0.9);
      color: var(--gold);
      font-size: 0.75rem;
      cursor: pointer;
    }

    .btn-small:hover {
      background: rgba(246, 211, 122, 0.15);
    }

    .btn-eye {
      padding: 0.15rem 0.4rem;
      min-width: 2.3rem;
    }

    .panel-footer {
      margin-top: 1rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      color: var(--gold-soft);
    }

    .btn-main {
      padding: 0.4rem 1.2rem;
      border-radius: 999px;
      border: 1px solid rgba(246, 211, 122, 0.9);
      background: radial-gradient(circle at 0% 0%, rgba(246, 211, 122, 0.4), rgba(0,0,0,0.95));
      color: var(--gold);
      font-size: 0.85rem;
      letter-spacing: 0.18em;
      text-indent: 0.18em;
      cursor: pointer;
      box-shadow:
        0 10px 20px rgba(0,0,0,0.9),
        0 0 18px rgba(246, 211, 122, 0.4);
    }

    .btn-main:hover {
      background: radial-gradient(circle at 0% 0%, rgba(255,240,200,0.5), rgba(0,0,0,0.98));
      box-shadow:
        0 14px 26px rgba(0,0,0,0.95),
        0 0 24px rgba(246, 211, 122, 0.6);
    }

    .warn {
      color: #ffb3b3;
      margin-top: 0.6rem;
    }

    .pwd-wrapper {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .pwd-input {
      flex: 1 1 auto;
    }

    .nav-table th:nth-child(1),
    .nav-table td:nth-child(1) {
      width: 4%;
    }

    .nav-table th:nth-child(2),
    .nav-table td:nth-child(2) {
      width: 22%;
    }

    .nav-table th:nth-child(3),
    .nav-table td:nth-child(3) {
      width: 60%;
    }

    .nav-table th:nth-child(4),
    .nav-table td:nth-child(4) {
      width: 14%;
    }

    @media (max-width: 900px) {
      .panel {
        padding: 1rem;
      }
      th, td {
        font-size: 0.75rem;
        padding: 0.25rem;
      }
      .page-title {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>
  <a class="back-home" href="index.html">â† è¿”å›é¦–é </a>

  <h1 class="page-title">Tasun æ¬Šé™è¡¨</h1>

  <div class="panel">
    <p>
      åªæœ‰ <strong>admin</strong> ç™»å…¥è€…å¯ä»¥ç·¨è¼¯æ­¤è¡¨ã€‚<br>
      æœ¬é é›†ä¸­ç®¡ç†ï¼š<strong>é¦–é æŒ‰éˆ•è¨­å®šï¼ˆåç¨±ï¼‹é€£çµï¼‰</strong> èˆ‡ <strong>å„å¸³è™Ÿå¯ä½¿ç”¨å“ªäº›æŒ‰éˆ•</strong>ã€‚<br>
      é¦–é æŒ‰éˆ•ä¾é †åºæ’åˆ—ï¼šå·¦ä¸Š â†’ å³ä¸Š â†’ å·¦ä¸­ â†’ å³ä¸­ â†’ å·¦ä¸‹ â†’ å³ä¸‹ï¼Œæœ€å¤š <strong>6 é¡†</strong>ï¼›<br>
      ã€Œç³»çµ± / æ¬Šé™ã€ç‚ºç¬¬ 7 é¡†ï¼Œå›ºå®šåªæœ‰ admin é¡¯ç¤ºï¼Œä¸åˆ—å…¥æœ¬è¡¨ã€‚
    </p>

    <!-- é¦–é æŒ‰éˆ•è¨­å®š -->
    <h2>é¦–é æŒ‰éˆ•è¨­å®šï¼ˆæœ€å¤š 6 é¡†ï¼‰</h2>
    <table class="nav-table">
      <thead>
        <tr>
          <th>åºè™Ÿ</th>
          <th>æŒ‰éˆ•åç¨±</th>
          <th>é€£çµç¶²å€ï¼ˆhrefï¼‰</th>
          <th>åˆªé™¤</th>
        </tr>
      </thead>
      <tbody id="navConfigBody"></tbody>
    </table>
    <div style="margin-top:0.5rem;">
      <button type="button" class="btn-small" id="addNavBtn">ï¼‹ æ–°å¢ä¸€é¡†æŒ‰éˆ•</button>
      <span style="font-size:0.78rem;color:var(--gold-soft);margin-left:0.4rem;">
        å»ºè­°ï¼šå¤–éƒ¨ç¶²å€è‡ªå‹•æ–°é–‹è¦–çª—ï¼Œæª”æ¡ˆæˆ–æœ¬ç«™ç¶²é ç›´æ¥å¡«ç›¸å°è·¯å¾‘å³å¯ã€‚
      </span>
    </div>

    <!-- å¸³è™Ÿæ¬Šé™è¨­å®š -->
    <h2 style="margin-top:1.2rem;">å¸³è™Ÿæ¬Šé™è¨­å®š</h2>
    <table>
      <thead>
        <tr id="authHeaderRow"></tr>
      </thead>
      <tbody id="authBody"></tbody>
    </table>

    <div class="panel-footer">
      <div>
        <button type="button" class="btn-small" id="addRowBtn">ï¼‹ æ–°å¢ä¸€åˆ—å¸³è™Ÿ</button>
      </div>
      <div>
        <button type="button" class="btn-main" id="saveBtn">å„²å­˜è¨­å®š</button>
      </div>
    </div>

    <p class="warn" id="statusMsg"></p>
  </div>

  <script>
    (function () {
      const AUTH_KEY    = "tasunAuthTable_v1";
      const CURRENT_KEY = "tasunCurrentUser_v1";
      const NAV_KEY     = "tasunNavButtons_v1";

      const MAX_NAV_BUTTONS = 6;

      const LEGACY_BUTTON_KEYS = ["btn1", "btn2", "btn3", "btn4", "btn5"];

      const navBody   = document.getElementById("navConfigBody");
      const authBody  = document.getElementById("authBody");
      const authHead  = document.getElementById("authHeaderRow");
      const addNavBtn = document.getElementById("addNavBtn");
      const addRowBtn = document.getElementById("addRowBtn");
      const saveBtn   = document.getElementById("saveBtn");
      const statusMsg = document.getElementById("statusMsg");

      // é è¨­é¦–é æŒ‰éˆ•
      const DEFAULT_NAV = [
        {
          id: "btn1",
          label: "è‡»é¼æ™‚ä»£å¤§å»ˆç®¡ç†è¡¨",
          href: "è‡»é¼ç®¡ç†è¡¨.html",
          target: ""
        },
        {
          id: "btn2",
          label: "ç¼ºå¤± / å“è³ª",
          href: "ç”„é¼quality.html",
          target: ""
        },
        {
          id: "btn3",
          label: "é›²ç«¯æª”æ¡ˆ",
          href: "https://www.dropbox.com/",
          target: "_blank"
        },
        {
          id: "btn4",
          label: "å·¥ç¨‹è³‡æ–™åº«",
          href: "å·¥ç¨‹è³‡æ–™åº«.html",
          target: ""
        },
        {
          id: "btn5",
          label: "è³‡æ–™åº«",
          href: "#",
          target: ""
        }
      ];

      // ---------------------------
      // æ¬Šé™æª¢æŸ¥ï¼šåªæœ‰ admin å¯é€²
      // ---------------------------
      function ensureAdmin() {
        const saved = localStorage.getItem(CURRENT_KEY);
        if (!saved) {
          alert("è«‹å…ˆåœ¨é¦–é ç™»å…¥å¾Œå†é€²å…¥æ¬Šé™è¡¨ã€‚");
          location.href = "index.html";
          return null;
        }
        try {
          const user = JSON.parse(saved);
          if (!user || user.level !== "admin") {
            alert("åªæœ‰ admin å¯ä»¥ç·¨è¼¯æ¬Šé™è¡¨ã€‚");
            location.href = "index.html";
            return null;
          }
          return user;
        } catch (e) {
          alert("ç™»å…¥è³‡è¨ŠéŒ¯èª¤ï¼Œè«‹é‡æ–°ç™»å…¥ã€‚");
          location.href = "index.html";
          return null;
        }
      }

      // ---------------------------
      // è®€å– / å„²å­˜ é¦–é æŒ‰éˆ•è¨­å®š
      // ---------------------------
      function normalizeNavEntry(entry, index) {
        const base = DEFAULT_NAV[index] || {};
        const label = (entry && entry.label ? String(entry.label).trim() : "") || base.label || `æŒ‰éˆ•${index + 1}`;
        const href  = (entry && entry.href  ? String(entry.href).trim()  : "") || base.href  || "#";
        const target= (entry && entry.target? String(entry.target).trim(): "") || base.target|| "";
        return {
          id: `btn${index + 1}`,
          label,
          href,
          target
        };
      }

      function loadNavConfig() {
        const raw = localStorage.getItem(NAV_KEY);
        if (!raw) {
          const defaults = DEFAULT_NAV.slice(0, MAX_NAV_BUTTONS);
          localStorage.setItem(NAV_KEY, JSON.stringify(defaults));
          return defaults;
        }
        try {
          const arr = JSON.parse(raw);
          if (Array.isArray(arr) && arr.length) {
            const limited = arr.slice(0, MAX_NAV_BUTTONS);
            return limited.map((item, idx) => normalizeNavEntry(item, idx));
          }
        } catch (e) {}
        const defaults = DEFAULT_NAV.slice(0, MAX_NAV_BUTTONS);
        localStorage.setItem(NAV_KEY, JSON.stringify(defaults));
        return defaults;
      }

      function saveNavConfig(navArr) {
        localStorage.setItem(NAV_KEY, JSON.stringify(navArr));
      }

      function renderNavTable(navArr) {
        navBody.innerHTML = "";
        navArr.forEach((nav, index) => {
          const tr = document.createElement("tr");

          const tdSeq = document.createElement("td");
          tdSeq.textContent = index + 1;
          tr.appendChild(tdSeq);

          const tdLabel = document.createElement("td");
          const inLabel = document.createElement("input");
          inLabel.type = "text";
          inLabel.className = "nav-label-input";
          inLabel.value = nav.label || "";
          inLabel.placeholder = "æŒ‰éˆ•åç¨±";
          tdLabel.appendChild(inLabel);
          tr.appendChild(tdLabel);

          const tdHref = document.createElement("td");
          const inHref = document.createElement("input");
          inHref.type = "text";
          inHref.className = "nav-href-input";
          inHref.value = nav.href || "";
          inHref.placeholder = "ä¾‹å¦‚ï¼šè‡»é¼ç®¡ç†è¡¨.html æˆ– https://...";
          tdHref.appendChild(inHref);
          tr.appendChild(tdHref);

          const tdDel = document.createElement("td");
          const delBtn = document.createElement("button");
          delBtn.type = "button";
          delBtn.className = "btn-small btn-nav-del";
          delBtn.textContent = "åˆªé™¤";
          tdDel.appendChild(delBtn);
          tr.appendChild(tdDel);

          navBody.appendChild(tr);
        });
      }

      function collectNavFromUI() {
        const rows = Array.from(navBody.querySelectorAll("tr"));
        const result = [];
        rows.forEach((tr, index) => {
          const labelInput = tr.querySelector(".nav-label-input");
          const hrefInput  = tr.querySelector(".nav-href-input");
          const label = (labelInput ? labelInput.value : "").trim();
          const href  = (hrefInput  ? hrefInput.value  : "").trim();

          if (!label) return; // åç¨±ç©ºç™½å°±ç•¥é

          result.push({
            id: `btn${result.length + 1}`,
            label,
            href: href || "#",
            target: href.startsWith("http") ? "_blank" : ""
          });
        });
        return result;
      }

      // ---------------------------
      // è®€å– / å„²å­˜ å¸³è™Ÿæ¬Šé™è¡¨
      // ---------------------------
      function makeButtonsAll(count) {
        return Array(count).fill(true);
      }

      function makeButtonsOnlyLast(count) {
        const arr = Array(count).fill(false);
        if (count > 0) arr[count - 1] = true;
        return arr;
      }

      function getDefaultAuthTable(btnCount) {
        return [
          {
            username: "alex",
            password: "Tasun08040224",
            level: "admin",
            buttons: makeButtonsAll(btnCount)
          },
          {
            username: "tasun",
            password: "tasun08040224",
            level: "write",
            buttons: makeButtonsAll(btnCount)
          },
          {
            username: "wu",
            password: "123456",
            level: "read",
            buttons: makeButtonsOnlyLast(btnCount)
          }
        ];
      }

      function normalizeRowFromStorage(row, btnCount) {
        const username = row.username || "";
        const password = row.password || "";
        const level    = row.level || "read";

        let buttons = [];

        if (Array.isArray(row.buttons)) {
          buttons = row.buttons.slice();
        } else {
          const legacy = [];
          LEGACY_BUTTON_KEYS.forEach(k => {
            if (Object.prototype.hasOwnProperty.call(row, k)) {
              legacy.push(!!row[k]);
            }
          });
          buttons = legacy;
        }

        const resultButtons = [];
        for (let i = 0; i < btnCount; i++) {
          resultButtons[i] = !!buttons[i];
        }

        return { username, password, level, buttons: resultButtons };
      }

      function loadAuthTable(btnCount) {
        const raw = localStorage.getItem(AUTH_KEY);
        if (!raw) {
          const defaults = getDefaultAuthTable(btnCount);
          localStorage.setItem(AUTH_KEY, JSON.stringify(defaults));
          return defaults;
        }
        try {
          const arr = JSON.parse(raw);
          if (Array.isArray(arr)) {
            return arr.map(r => normalizeRowFromStorage(r, btnCount));
          }
        } catch (e) {}
        const defaults = getDefaultAuthTable(btnCount);
        localStorage.setItem(AUTH_KEY, JSON.stringify(defaults));
        return defaults;
      }

      function saveAuthTable(arr) {
        localStorage.setItem(AUTH_KEY, JSON.stringify(arr));
      }

      function renderAuthHeader(navArr) {
        authHead.innerHTML = "";

        const thUser = document.createElement("th");
        thUser.textContent = "ç”¨æˆ¶å";
        authHead.appendChild(thUser);

        const thPwd = document.createElement("th");
        thPwd.textContent = "å¯†ç¢¼";
        authHead.appendChild(thPwd);

        const thLevel = document.createElement("th");
        thLevel.textContent = "æ¬Šé™ç´šåˆ¥";
        authHead.appendChild(thLevel);

        navArr.forEach((nav, idx) => {
          const th = document.createElement("th");
          th.textContent = nav.label || `æŒ‰éˆ•${idx + 1}`;
          authHead.appendChild(th);
        });

        const thDel = document.createElement("th");
        thDel.textContent = "åˆªé™¤";
        authHead.appendChild(thDel);
      }

      function renderAuthTable(data, navArr) {
        const btnCount = navArr.length;
        authBody.innerHTML = "";

        data.forEach(row => {
          const tr = document.createElement("tr");

          const tdUser = document.createElement("td");
          const inUser = document.createElement("input");
          inUser.type = "text";
          inUser.value = row.username || "";
          inUser.placeholder = "å¸³è™Ÿ";
          tdUser.appendChild(inUser);
          tr.appendChild(tdUser);

          const tdPwd = document.createElement("td");
          const pwdWrapper = document.createElement("div");
          pwdWrapper.className = "pwd-wrapper";

          const inPwd = document.createElement("input");
          inPwd.type = "password";
          inPwd.value = row.password || "";
          inPwd.placeholder = "å¯†ç¢¼";
          inPwd.className = "pwd-input";

          const eyeBtn = document.createElement("button");
          eyeBtn.type = "button";
          eyeBtn.className = "btn-small btn-eye";
          eyeBtn.textContent = "ğŸ‘";

          pwdWrapper.appendChild(inPwd);
          pwdWrapper.appendChild(eyeBtn);
          tdPwd.appendChild(pwdWrapper);
          tr.appendChild(tdPwd);

          const tdLevel = document.createElement("td");
          const sel = document.createElement("select");
          ["admin", "write", "read"].forEach(lv => {
            const opt = document.createElement("option");
            opt.value = lv;
            opt.textContent = lv;
            if (row.level === lv) opt.selected = true;
            sel.appendChild(opt);
          });
          tdLevel.appendChild(sel);
          tr.appendChild(tdLevel);

          for (let i = 0; i < btnCount; i++) {
            const td = document.createElement("td");
            const chk = document.createElement("input");
            chk.type = "checkbox";
            chk.checked = !!row.buttons[i];
            td.appendChild(chk);
            tr.appendChild(td);
          }

          const tdDel = document.createElement("td");
          const delBtn = document.createElement("button");
          delBtn.type = "button";
          delBtn.className = "btn-small btn-del";
          delBtn.textContent = "åˆªé™¤";
          tdDel.appendChild(delBtn);
          tr.appendChild(tdDel);

          authBody.appendChild(tr);
        });
      }

      function collectAuthTable(navCount) {
        const rows = Array.from(authBody.querySelectorAll("tr"));
        const result = [];

        rows.forEach(tr => {
          const tds = tr.querySelectorAll("td");

          const usernameInput = tds[0].querySelector("input");
          const pwdInput      = tds[1].querySelector(".pwd-input");
          const levelSelect   = tds[2].querySelector("select");

          const username = usernameInput ? usernameInput.value.trim() : "";
          const password = pwdInput ? pwdInput.value.trim() : "";
          const level    = levelSelect ? levelSelect.value : "read";

          if (!username || !password) return;

          const buttons = [];
          for (let i = 0; i < navCount; i++) {
            const tdIndex = 3 + i;
            const chk = tds[tdIndex].querySelector("input[type='checkbox']");
            buttons.push(chk ? chk.checked : false);
          }

          result.push({ username, password, level, buttons });
        });

        return result;
      }

      // ---------------------------
      // åˆå§‹åŒ–
      // ---------------------------
      document.addEventListener("DOMContentLoaded", function () {
        const user = ensureAdmin();
        if (!user) return;

        let navArr = loadNavConfig();
        let authData = loadAuthTable(navArr.length);

        renderNavTable(navArr);
        renderAuthHeader(navArr);
        renderAuthTable(authData, navArr);

        // æ–°å¢ä¸€é¡†æŒ‰éˆ•
        addNavBtn.addEventListener("click", function () {
          navArr = collectNavFromUI();
          authData = collectAuthTable(navArr.length);

          if (navArr.length >= MAX_NAV_BUTTONS) {
            alert("ç›®å‰æœ€å¤šåªæ”¯æ´ 6 é¡†é¦–é æŒ‰éˆ•ã€‚");
            return;
          }

          navArr.push({
            id: `btn${navArr.length + 1}`,
            label: `æŒ‰éˆ•${navArr.length + 1}`,
            href: "#",
            target: ""
          });

          // æ¯å€‹å¸³è™Ÿæ–°å¢ä¸€å€‹ false
          authData.forEach(row => {
            row.buttons.push(false);
          });

          renderNavTable(navArr);
          renderAuthHeader(navArr);
          renderAuthTable(authData, navArr);
        });

        // é¦–é æŒ‰éˆ•è¡¨ï¼šåˆªé™¤åˆ—
        navBody.addEventListener("click", function (e) {
          const target = e.target;
          if (!target.classList.contains("btn-nav-del")) return;

          navArr = collectNavFromUI();
          authData = collectAuthTable(navArr.length);

          const tr = target.closest("tr");
          if (!tr) return;
          const index = Array.from(navBody.children).indexOf(tr);
          if (index < 0) return;

          navArr.splice(index, 1);
          authData.forEach(row => {
            row.buttons.splice(index, 1);
          });

          renderNavTable(navArr);
          renderAuthHeader(navArr);
          renderAuthTable(authData, navArr);
        });

        // å¸³è™Ÿè¡¨ï¼šåˆªé™¤åˆ— + é¡¯ç¤ºå¯†ç¢¼
        authBody.addEventListener("click", function (e) {
          const target = e.target;

          if (target.classList.contains("btn-del")) {
            const tr = target.closest("tr");
            if (tr) tr.remove();
            return;
          }

          if (target.classList.contains("btn-eye")) {
            const td = target.closest("td");
            if (!td) return;
            const input = td.querySelector(".pwd-input");
            if (!input) return;
            input.type = input.type === "password" ? "text" : "password";
          }
        });

        // æ–°å¢ä¸€åˆ—å¸³è™Ÿ
        addRowBtn.addEventListener("click", function () {
          authData = collectAuthTable(navArr.length);
          const newRow = {
            username: "",
            password: "",
            level: "read",
            buttons: Array(navArr.length).fill(false)
          };
          authData.push(newRow);
          renderAuthTable(authData, navArr);
        });

        // å„²å­˜å…¨éƒ¨è¨­å®š
        saveBtn.addEventListener("click", function () {
          statusMsg.textContent = "";

          navArr   = collectNavFromUI();
          authData = collectAuthTable(navArr.length);

          if (!navArr.length) {
            statusMsg.textContent = "è‡³å°‘éœ€è¦ä¸€é¡†é¦–é æŒ‰éˆ•ã€‚";
            return;
          }
          if (!authData.length) {
            statusMsg.textContent = "è‡³å°‘éœ€è¦ä¸€ç­†å¸³è™Ÿè³‡æ–™ã€‚";
            return;
          }

          saveNavConfig(navArr);
          saveAuthTable(authData);

          statusMsg.textContent = "å·²å„²å­˜é¦–é æŒ‰éˆ•èˆ‡å¸³è™Ÿæ¬Šé™è¨­å®šï¼Œå›åˆ°é¦–é é‡æ–°ç™»å…¥å³å¯å¥—ç”¨ã€‚";
        });
      });
    })();
  </script>
</body>
</html>
